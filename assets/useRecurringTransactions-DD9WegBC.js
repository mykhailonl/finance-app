import{p as u}from"./chunk-EF7DTUVF-DUQZMWWT.js";import{i as b,c as l}from"./IconType-D_XhrS7g.js";import{f as w}from"./formatAmount-BKTdCLbz.js";import{u as D,v as M}from"./Avatar-DdgJk9fH.js";import{u as j}from"./useAuth-CUq5kDrt.js";import{s as R,f as S,p as v}from"./sortTransactions-BED6ieis.js";const q=({iconName:e,mainCard:h,cardTitle:p,cardValue:f,styles:m})=>{const o=e?b[e]:null,P=w(f),a=!!e,s=!!h,d=a&&!s,r=s,i=d,g=s?"bg-grey-900":a?"bg-beige-100":"bg-white",x=a?s?"py-6 px-5":"p-4":"p-5",y=a?s?"md:p-6":"md:p-4":"md:p-6";return u.jsxs("div",{className:l("rounded-xl flex gap-5 items-center grow",g,x,y,m),children:[o&&u.jsx("div",{className:l(r?"text-white":"text-grey-900"),children:u.jsx(o,{className:"w-10 h-10"})}),u.jsxs("div",{className:l("flex flex-col gap-3",i&&"my-1"),children:[u.jsx("p",{className:l("text-preset-4",r?"text-white":"text-grey-500"),children:p}),u.jsx("h1",{className:l("text-preset-1",r?"text-white":"text-grey-900"),children:P})]})]})},N=e=>new Date(e.transaction_date).getDate(),B=({sortBy:e,page:h,query:p,period:f="2025-08"})=>{const{user:m}=j(),{data:o}=D();return M({queryKey:["recurring",e,h,p,f,m==null?void 0:m.id],queryFn:async()=>{const a=o.filter(t=>t.recurring).reduce((t,n)=>(t.find(T=>T.name===n.name)||t.push(n),t),[]),s=o.sort((t,n)=>new Date(n==null?void 0:n.transaction_date).getTime()-new Date(t==null?void 0:t.transaction_date).getTime())[0],d=new Date(s==null?void 0:s.transaction_date).getDate(),r={transactions:a.filter(t=>o.some(n=>n.name===t.name&&n.recurring&&n.transaction_date.startsWith(f)))},i={transactions:a.filter(t=>!r.transactions.find(T=>t.name===T.name))},g={transactions:i.transactions.filter(t=>{const n=N(t);return n>d&&n<=d+5})},x=R(a,e,!0),y=S(x,p),c=v(y,h,10);return{transactions:{transactions:c.items,amount:a.reduce((t,n)=>t+Math.abs(n.amount),0),totalFilteredCount:c.items.length},currentDay:d,currentPage:c.currentPage,totalPages:c.totalPages,hasNext:c.hasNext,hasPrev:c.hasPrev,paidRecurring:{transactions:r.transactions,amount:r.transactions.reduce((t,n)=>t+Math.abs(n.amount),0),numberOfTransactions:r.transactions.length},upcomingRecurring:{transactions:i.transactions,amount:i.transactions.reduce((t,n)=>t+Math.abs(n.amount),0),numberOfTransactions:i.transactions.length},dueSoon:{transactions:g.transactions,amount:g.transactions.reduce((t,n)=>t+Math.abs(n.amount),0),numberOfTransactions:g.transactions.length}}}})};export{q as S,N as e,B as u};
