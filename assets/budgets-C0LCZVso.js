import{p as e,a as C,C as M,w as T}from"./chunk-EF7DTUVF-DUQZMWWT.js";import{I as d,B as L}from"./InfoCard-BIzRzuQk.js";import{c as k}from"./IconType-D_XhrS7g.js";import{D as g,q as h}from"./Avatar-DdgJk9fH.js";import{T as z}from"./people-CIRKKBWR.js";import{f as l}from"./formatAmount-BKTdCLbz.js";import{P as A}from"./ProgressBar-C3Dd7msz.js";import{S as E,T as b}from"./TransactionListSection-DfFmMj7c.js";import{B as u}from"./Button-DqqQBIgQ.js";import{P as D,a as H,N as I}from"./PageWrapper-0LbDWIO-.js";import{u as j}from"./useModal-BE7etAkf.js";import{P as p}from"./PaginationButton-CR_COO4x.js";import{u as W}from"./clsx-CheCv0Lv.js";import{u as f}from"./useSearchParamValue-y9TCmyzY.js";import{n as F}from"./normalizePeriod-CuCbOXIS.js";import"./index-Bd0djgpv.js";import"./useAuth-CUq5kDrt.js";import"./WidgetTransaction-Cr05q7Ba.js";import"./formatDate-Ct18L270.js";import"./getUserTimeZone-Djy-hj5f.js";const R=({budget:t,spent:a})=>{const s=z[t.theme],r=l(t.maximum),n=l(a);return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(g,{styles:k(s,"h-full"),basic:!1}),e.jsx("p",{className:"text-preset-4 text-grey-500",children:t.category})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-preset-3 text-grey-900",children:n}),e.jsxs("span",{className:"text-preset-5 text-grey-500",children:["of ",r]})]})]})},Y=({budgets:t,categorySpent:a})=>e.jsxs("div",{className:"flex flex-col gap-6 grow lg:self-stretch",children:[e.jsx("h2",{className:"text-preset-2 text-grey-900",children:"Spending Summary"}),e.jsx("div",{className:"flex flex-col gap-4",children:t.slice().sort((s,r)=>{const n=a[s.category];return a[r.category]-n}).map((s,r)=>{const n=a[s.category];return e.jsxs(C.Fragment,{children:[e.jsx(R,{budget:s,spent:n}),r<t.length-1&&e.jsx(g,{})]},s.category)})})]}),_=({budget:t,transactions:a,spentThisMonth:s})=>{const r=l(t.maximum),n=t.maximum-s>0?t.maximum-s:0,o=Math.round(s/t.maximum*100);return e.jsxs(h,{children:[e.jsx(E,{item:t}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("p",{className:"text-preset-4 text-grey-500",children:["Maximum of ",r]}),e.jsx(A,{color:t.theme,percent:o}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(d,{name:"Spent",amount:s,color:t.theme}),e.jsx(d,{name:"Remaining",amount:n})]})]}),e.jsx(b,{transactions:a,title:"Latest Spending",link:`/transactions?page=1&filterBy=${t.category}`,linkText:"See All",emptyTextState:"No transactions for this budget yet"})]})},O=({budgets:t,latestTransactionsByCategory:a,spentByCategory:s})=>e.jsx("div",{className:"flex flex-col gap-6 grow",children:t.map(r=>{const n=a[r.category],o=s[r.category];return e.jsx(_,{budget:r,transactions:n,spentThisMonth:o},r.category)})}),U=()=>{const{openModal:t}=j();return e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(D,{title:"Budgets"}),e.jsx(u,{variant:"primary",onClick:()=>t({type:"budget-add"}),styles:"p-4",children:"Add New Budget"})]})},q=(t,a="en-US")=>{if(t<1||t>12)return"January";const s=new Date(2e3,t-1,1);return new Intl.DateTimeFormat(a,{month:"long"}).format(s)},J=({month:t,year:a,handleNextMonth:s,handlePrevMonth:r})=>{const n=q(+t);return e.jsxs("div",{className:"flex self-stretch items-center justify-between",children:[e.jsxs("p",{className:"text-preset-4-bold text-grey-900",children:[n,", ",a]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{role:"prev",disabled:!1,onClick:r}),e.jsx(p,{role:"next",disabled:!1,onClick:s})]})]})},V=()=>{const[t,a]=M();return s=>{const r=new URLSearchParams(t);Object.entries(s).forEach(([n,o])=>{o!==void 0&&r.set(n,String(o))}),a(r)}},fe=T(function(){const[a,s]=f("month"),[r]=f("year"),n=F(a,r),{data:{budgets:o,totalLimit:y,spentWithinBudgets:S,spentByCategory:m,latestTransactionsByCategory:N}}=W(n),{openModal:B}=j(),x=V(),v=()=>{const i=Number(a),c=Number(r);i>1?s(String(i-1)):x({year:String(c-1),month:"12"})},w=()=>{const i=Number(a),c=Number(r);i<=11?s(String(i+1)):x({year:String(c+1),month:"1"})},P=!o.length;return e.jsxs(H,{children:[e.jsx(U,{}),P?e.jsx(I,{text:"Set spending limits and monitor your progress with budgets.",children:e.jsx(u,{variant:"primary",onClick:()=>B({type:"budget-add"}),styles:"max-w-[150px] p-4",children:"Add Budget"})}):e.jsxs("div",{className:"flex flex-col gap-6 lg:flex-row",children:[e.jsxs(h,{styles:"gap-8 lg:w-[428px] lg:max-h-fit",children:[e.jsx(J,{month:a,year:r,handleNextMonth:w,handlePrevMonth:v}),e.jsxs("div",{className:"flex flex-col md:flex-row lg:flex-col md:items-center gap-8",children:[e.jsx("div",{className:"flex items-center justify-center relative w-full h-[300px] md:h-[250px] md:w-[250px] lg:w-[250px]",children:e.jsx(L,{budgets:o,limit:y,spent:S})}),e.jsx(Y,{budgets:o,categorySpent:m})]})]}),e.jsx(O,{budgets:o,latestTransactionsByCategory:N,spentByCategory:m})]})]})});export{fe as default};
