import{p as t,w as c}from"./chunk-EF7DTUVF-DUQZMWWT.js";import{B as n}from"./Button-DqqQBIgQ.js";import{P as d,a as p,N as m}from"./PageWrapper-0LbDWIO-.js";import{u as i}from"./useModal-BE7etAkf.js";import{A as x,P as y}from"./ProgressSection-B4HQxDBF.js";import{S as f,T as u}from"./TransactionListSection-DfFmMj7c.js";import{q as j,u as g}from"./Avatar-DdgJk9fH.js";import{f as h}from"./formatAmount-BKTdCLbz.js";import{u as P}from"./usePots-CKX_Kcs8.js";import"./IconType-D_XhrS7g.js";import"./people-CIRKKBWR.js";import"./ProgressBar-C3Dd7msz.js";import"./WidgetTransaction-Cr05q7Ba.js";import"./formatDate-Ct18L270.js";import"./getUserTimeZone-Djy-hj5f.js";import"./useAuth-CUq5kDrt.js";const w=()=>{const{openModal:s}=i();return t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx(d,{title:"Pots"}),t.jsx(n,{variant:"primary",onClick:()=>s({type:"pot-add"}),styles:"p-4",children:"Add New Pot"})]})},S=({pot:s,transactions:e})=>{const{openModal:o}=i(),a=h(s.total);return t.jsxs(j,{styles:"gap-8",children:[t.jsx(f,{item:s}),t.jsxs("div",{className:"flex flex-col gap-4 my-2",children:[t.jsx(x,{fieldName:"Total Saved",fieldValue:a}),t.jsx(y,{pot:s,smallBar:!0})]}),t.jsxs("div",{className:"flex gap-4 mb-4 md:mb-0",children:[t.jsx(n,{variant:"secondary",onClick:()=>o({type:"pot-add-money",pot:s}),styles:"p-4 grow",children:"Add Money"}),t.jsx(n,{variant:"secondary",onClick:()=>o({type:"pot-withdraw-money",pot:s}),styles:"p-4 grow",children:"Withdraw"})]}),t.jsx(u,{transactions:e,title:"Latest Transaction",link:`/transactions?page=1&filterBy=Transfer&potId=${s.id}`,linkText:"See All",emptyTextState:"No transactions for this pot yet",styles:{containerStyles:"h-[124px]",listStyles:"grow",transactionStyles:"grow"}})]})},T=({pots:s})=>{const{data:e}=g();return t.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:s.map(o=>{const a=e.filter(r=>r.transaction_type==="transfer"&&r.pot_id===o.id).sort((r,l)=>new Date(l.transaction_date).getTime()-new Date(r.transaction_date).getTime()).slice(0,1);return t.jsx(S,{pot:o,transactions:a},o.name)})})},F=c(function(){const{data:{pots:e}}=P(),{openModal:o}=i(),a=!e.length;return t.jsxs(p,{children:[t.jsx(w,{}),a?t.jsx(m,{text:"Create your first pot to start saving",children:t.jsx(n,{variant:"primary",onClick:()=>o({type:"pot-add"}),styles:"max-w-[150px] p-4",children:"Add Pot"})}):t.jsx(T,{pots:e})]})});export{F as default};
