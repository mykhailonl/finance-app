import{a,p as e,C as v,w}from"./chunk-EF7DTUVF-DUQZMWWT.js";import{T as B,N as y,P as F,a as T}from"./PageWrapper-C_v4nZFw.js";import{c as x}from"./IconType-D_XhrS7g.js";import{w as C,x as A,F as P,D as S,u as E,q as _}from"./Avatar-C23dFxrF.js";import{u as o}from"./useSearchParamValue-C9MwWx5X.js";import{P as M}from"./Pagination-C9BS1Kpb.js";import{D as j}from"./Dropdown-DCdUCTIr.js";import{I as k}from"./Input-DN-dqtY9.js";import{u as b}from"./useDevice-BvX5AX7L.js";import{B as L}from"./Button-DqqQBIgQ.js";import{u as h}from"./useModal-BE7etAkf.js";import{f as q,a as D}from"./formatDate-Ct18L270.js";import{f as Z,s as O,p as V}from"./sortTransactions-BED6ieis.js";import"./people-CIRKKBWR.js";import"./useAuth-CUq5kDrt.js";import"./PaginationButton-CR_COO4x.js";import"./getUserTimeZone-Djy-hj5f.js";const H=new Map([["bold",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208.49,191.51a12,12,0,0,1-17,17L128,145,64.49,208.49a12,12,0,0,1-17-17L111,128,47.51,64.49a12,12,0,0,1,17-17L128,111l63.51-63.52a12,12,0,0,1,17,17L145,128Z"}))],["duotone",a.createElement(a.Fragment,null,a.createElement("path",{d:"M216,56V200a16,16,0,0,1-16,16H56a16,16,0,0,1-16-16V56A16,16,0,0,1,56,40H200A16,16,0,0,1,216,56Z",opacity:"0.2"}),a.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["fill",a.createElement(a.Fragment,null,a.createElement("path",{d:"M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM181.66,170.34a8,8,0,0,1-11.32,11.32L128,139.31,85.66,181.66a8,8,0,0,1-11.32-11.32L116.69,128,74.34,85.66A8,8,0,0,1,85.66,74.34L128,116.69l42.34-42.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["light",a.createElement(a.Fragment,null,a.createElement("path",{d:"M204.24,195.76a6,6,0,1,1-8.48,8.48L128,136.49,60.24,204.24a6,6,0,0,1-8.48-8.48L119.51,128,51.76,60.24a6,6,0,0,1,8.48-8.48L128,119.51l67.76-67.75a6,6,0,0,1,8.48,8.48L136.49,128Z"}))],["regular",a.createElement(a.Fragment,null,a.createElement("path",{d:"M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"}))],["thin",a.createElement(a.Fragment,null,a.createElement("path",{d:"M202.83,197.17a4,4,0,0,1-5.66,5.66L128,133.66,58.83,202.83a4,4,0,0,1-5.66-5.66L122.34,128,53.17,58.83a4,4,0,0,1,5.66-5.66L128,122.34l69.17-69.17a4,4,0,1,1,5.66,5.66L133.66,128Z"}))]]),g=a.forwardRef((t,s)=>a.createElement(C,{ref:s,...t,weights:H}));g.displayName="XIcon";const u=({label:t,value:s,onClick:r})=>e.jsxs("div",{className:x("flex items-center","px-2 py-1 gap-1","bg-grey-100 text-gray-700 hover:text-gray-900","rounded-full","text-preset-5","cursor-custom"),onClick:r,children:[e.jsxs("p",{children:[t,":"]}),e.jsx("p",{children:s}),e.jsx(g,{color:"oklch(21% 0.034 264.665)",weight:"bold",size:10})]}),f=()=>{const[t]=v(),[s]=o("sortBy"),[r]=o("filterBy"),[l]=o("query"),n=t.has("sortBy")||t.has("filterBy")||t.has("query");return{sortBy:t.has("sortBy")?s:null,filterBy:t.has("filterBy")?r:null,query:t.has("query")?l:null,hasActiveFilters:n}},I=()=>{const{sortBy:t,filterBy:s,query:r}=f(),[,l]=o("sortBy"),[,n]=o("filterBy"),[,c]=o("query"),i={latest:"Latest",oldest:"Oldest",alphAsc:"A to Z",alphDesc:"Z to A",highest:"Highest",lowest:"Lowest"};return e.jsxs("div",{className:"flex flex-wrap items-center gap-2 lg:px-4",children:[e.jsx("span",{className:"text-gray-500 text-preset-4",children:"Active filters:"}),t&&e.jsx(u,{label:"Sort",value:i[t],onClick:()=>{l("latest")}}),s&&e.jsx(u,{label:"Category",value:s,onClick:()=>{n("all")}}),r&&e.jsx(u,{label:"Query",value:r,onClick:()=>{c("")}})]})},R=()=>{const{hasActiveFilters:t}=f(),[,s]=v();return t&&e.jsx("button",{className:"flex items-center justify-center p-3 md:px-4 cursor-custom hover:bg-grey-100 rounded-lg",onClick:()=>s(),children:e.jsx(g,{color:"#696868",weight:"bold"})})},Q=()=>{const{isDesktop:t}=b(),[s,r]=o("sortBy"),[l,n]=o("filterBy"),[c,i]=o("query"),d=t?"Search transaction":"Search";return e.jsxs("div",{className:"flex gap-5 items-center justify-between",children:[e.jsx(k,{label:{showLabel:!1},input:{value:c,onChange:i,placeholder:d},helperText:{showHelper:!1},showSearchIcon:!0,styles:"min-w-[121px] max-w-[320px] grow"}),e.jsxs("div",{className:"flex gap-2 md:gap-3",children:[e.jsx(j,{label:{showLabel:!0,labelText:"Sort By",bold:!1},value:s,onChange:r,options:A,showCaret:!0,styles:"gap-2",mobileView:!0,usedOptionFirst:!0}),e.jsx(j,{label:{showLabel:!0,labelText:"Category",bold:!1},value:l,onChange:n,options:P,showCaret:!0,styles:"gap-2",mobileView:!0,usedOptionFirst:!0}),e.jsx(R,{})]})]})},W=({transaction:t})=>{const{openModal:s}=h(),r=()=>{t.transaction_type==="transfer"?s({type:"transaction-restriction"}):s({type:"transaction-edit",transaction:t})},l=q({amount:t.amount}),n=D(t.transaction_date);return e.jsxs("div",{className:"flex items-center gap-3 md:grid md:grid-cols-[1fr_80px_88px_88px] lg:grid-cols-[1fr_120px_120px_200px] md:gap-8 md:px-0 lg:px-4",onClick:r,children:[e.jsxs("div",{className:"flex items-center gap-3 md:gap-4 flex-1 md:flex-initial",children:[e.jsx(B,{transaction:t,styles:"inline-flex"}),e.jsxs("div",{className:"flex flex-col md:block",children:[e.jsx("p",{className:"text-preset-4-bold text-grey-900",children:t.name}),e.jsx("p",{className:"text-preset-5 text-grey-500 md:hidden",children:t.category})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("p",{className:"text-preset-5 text-grey-500",children:t.category})}),e.jsx("div",{className:"hidden md:block",children:e.jsx("p",{className:"text-preset-5 text-grey-500 text-nowrap",children:n})}),e.jsxs("div",{className:"flex flex-col items-end gap-1 md:block",children:[e.jsx("p",{className:x("text-preset-4-bold text-right",l.colorStyle),children:l.amount}),e.jsx("p",{className:"text-preset-5 text-grey-500 md:hidden",children:n})]})]})},z=({transactions:t,total:s,totalFiltered:r})=>{const{openModal:l}=h();return e.jsx("div",{className:"flex flex-col gap-4 h-full",children:s?e.jsx(e.Fragment,{children:r?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:x("hidden md:grid grid-cols-[1fr_80px_88px_88px] lg:grid-cols-[1fr_120px_120px_200px] items-center","gap-8 px-0 py-3 lg:px-4 ","text-grey-500 text-preset-5","border-b border-grey-100"),children:[e.jsx("p",{children:"Recipient / Sender"}),e.jsx("p",{children:"Category"}),e.jsx("p",{children:"Transaction Date"}),e.jsx("p",{className:"text-end",children:"Amount"})]}),t.map((n,c)=>e.jsxs(a.Fragment,{children:[e.jsx(W,{transaction:n}),c<t.length-1&&e.jsx(S,{})]},n.id))]}):e.jsx(y,{text:"No transactions found."})}):e.jsx(y,{text:"You haven't added any transactions.",children:e.jsx(L,{variant:"primary",onClick:()=>l({type:"transaction-add",options:{recurring:!1}}),styles:"max-w-[150px] p-4",children:"Add Transaction"})})})},N=({page:t=1,sortBy:s="latest",filterBy:r="all",query:l="",potId:n})=>{const{data:c}=E();return a.useMemo(()=>{let i=c;r!=="all"&&(i=i.filter(m=>m.category===r)),l&&(i=Z(i,l)),n&&(i=i.filter(m=>m.pot_id===n));const d=O(i,s),p=V(d,t,10);return{transactions:p.items,totalPages:p.totalPages,totalCount:c.length,totalFilteredCount:p.totalFilteredCount,currentPage:p.currentPage,hasNext:p.hasNext,hasPrev:p.hasPrev,allFiltered:d}},[c,t,s,r,l,n])},G=()=>{const{hasActiveFilters:t}=f(),{transactions:s,totalPages:r,hasNext:l,hasPrev:n,totalCount:c,totalFilteredCount:i}=N({page:o("page")[0],sortBy:o("sortBy")[0],filterBy:o("filterBy")[0],query:o("query")[0],potId:o("potId")[0]}),d=c===0?"h-full":"";return e.jsxs(_,{largerGap:!0,styles:x(d,"grow"),children:[e.jsx(Q,{}),t&&e.jsx(I,{}),e.jsx(z,{transactions:s,total:c,totalFiltered:i}),e.jsx(M,{totalPages:r,hasNext:l,hasPrev:n})]})},X=({showButton:t=!1})=>{const{openModal:s}=h(),{isMobile:r}=b(),l=r?"Add":"Add Transaction";return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{title:"Transactions"}),t&&e.jsx(L,{variant:"primary",onClick:()=>s({type:"transaction-add",options:{recurring:!1}}),styles:"p-4",children:l})]})},xe=w(function(){const{totalCount:s}=N({});return e.jsxs(T,{children:[e.jsx(X,{showButton:!!s}),e.jsx(G,{})]})});export{xe as default};
